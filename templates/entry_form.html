{% extends 'layout.html' %}

{% block title %}{% if entry %}Edit Entry{% else %}Add Entry{% endif %} - Mood Journal{% endblock %}
{% block page_title %}{% if entry %}Edit Entry{% else %}Add Entry{% endif %}{% endblock %}

{% block back_button %}
<a href="{{ url_for('home') }}" class="back-button">&lt; Back</a>
{% endblock %}

{% block content %}
    <form method="POST" action="{% if entry %}{{ url_for('edit_entry', entry_id=entry._id) }}{% else %}{{ url_for('create_entry') }}{% endif %}" class="entry-form">
        
        <!-- Date Display -->
        <div class="date-display">
            {% if entry %}
                {{ entry.date.strftime('%A, %B %d, %Y') }}
            {% else %}
                {{ selected_date.strftime('%A, %B %d, %Y') if selected_date else 'Today' }}
            {% endif %}
            {% if not entry %}
                <input type="hidden" name="entry_date" value="{{ selected_date.strftime('%Y-%m-%d') if selected_date else '' }}">
            {% endif %}
        </div>

        <!-- Mood Selector -->
        <div class="mood-selector">
            <h3>Select your mood</h3>
            <div class="mood-options">
                {% for mood_val in range(1, 6) %}
                    <input type="radio" 
                           id="mood-{{ mood_val }}" 
                           name="mood_value" 
                           value="{{ mood_val }}" 
                           class="mood-radio"
                           {% if entry and entry.mood_value == mood_val %}checked{% endif %}
                           required>
                    <label for="mood-{{ mood_val }}" class="mood-option" data-mood="{{ mood_val }}">
                        {{ mood_val }}
                    </label>
                {% endfor %}
            </div>
        </div>

        <!-- Text Area -->
        <div class="entry-textarea">
            <textarea name="entry_text" 
                      placeholder="What's on your mind?"
                      rows="8">{% if entry %}{{ entry.entry_text }}{% endif %}</textarea>
        </div>

        <!-- Submit Button -->
        <button type="submit" class="submit-button">
            {% if entry %}Save Changes{% else %}Save Entry{% endif %}
        </button>
    </form>
{% endblock %}
